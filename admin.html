<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Modulkezelő – Angol Mini</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: sans-serif; background: #0f172a; color: white; margin: 0; padding: 20px; }
h1 { color: #22c55e; }
button { padding: 8px 12px; margin: 5px; border: none; border-radius: 6px; cursor: pointer; }
.add { background: #22c55e; color: black; }
.delete { background: #ef4444; color: white; }
.module { border: 1px solid #334155; padding: 10px; border-radius: 6px; margin-top: 10px; }
</style>
</head>
<body>
<h1>Modulkezelő</h1>
<input type="file" id="fileInput" accept=".json">
<button class="add" onclick="uploadModule()">+ Modul feltöltése</button>
<div id="moduleList"></div>

<script>
function renderModules() {
    let modules = JSON.parse(localStorage.getItem("modules") || "[]");
    let list = document.getElementById("moduleList");
    list.innerHTML = "";
    modules.forEach((m, idx) => {
        let div = document.createElement("div");
        div.className = "module";
        div.innerHTML = `<b>${m.title}</b><br>${m.description || ""}<br>
                         <button class="delete" onclick="deleteModule(${idx})">Törlés</button>`;
        list.appendChild(div);
    });
}
function uploadModule() {
    let file = document.getElementById("fileInput").files[0];
    if (!file) return alert("Válassz egy JSON fájlt!");
    let reader = new FileReader();
    reader.onload = function(e) {
        let modules = JSON.parse(localStorage.getItem("modules") || "[]");
        try {
            let json = JSON.parse(e.target.result);
            modules.push(json);
            localStorage.setItem("modules", JSON.stringify(modules));
            renderModules();
            alert("Modul feltöltve!");
        } catch (err) {
            alert("Hibás JSON fájl!");
        }
    };
    reader.readAsText(file);
}
function deleteModule(idx) {
    let modules = JSON.parse(localStorage.getItem("modules") || "[]");
    modules.splice(idx, 1);
    localStorage.setItem("modules", JSON.stringify(modules));
    renderModules();
}
renderModules();
</script>
</body>
</html>
